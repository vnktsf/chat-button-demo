<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Chat Demo</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <button id="chatBtn">Chat</button>
  </div>
  <script>
    let chatLoaded = false;
    function loadChatScript() {
      if (chatLoaded) return;
      chatLoaded = true;

      // Add Salesforce Embedded Messaging initialization and script
      const initScript = document.createElement('script');
      initScript.type = 'text/javascript';
      initScript.text = `
        function initEmbeddedMessaging() {
          try {
            embeddedservice_bootstrap.settings.language = 'en_US';
            embeddedservice_bootstrap.init(
              '00Daj00000P73di',
              'githubdemo',
              'https://gerent-14a-dev-ed.develop.my.site.com/ESWgithubdemo1755775359317',
              { scrt2URL: 'https://gerent-14a-dev-ed.develop.my.salesforce-scrt.com' }
            );
          } catch (err) {
            console.error('Error loading Embedded Messaging: ', err);
          }
        };
      `;
      document.body.appendChild(initScript);

      const salesforceScript = document.createElement('script');
      salesforceScript.type = 'text/javascript';
      salesforceScript.src = 'https://gerent-14a-dev-ed.develop.my.site.com/ESWgithubdemo1755775359317/assets/js/bootstrap.min.js';
      salesforceScript.onload = function() {
        if (typeof initEmbeddedMessaging === "function") {
          initEmbeddedMessaging();
        }
      };
      document.body.appendChild(salesforceScript);
    }

    document.getElementById('chatBtn').addEventListener('click', loadChatScript);
  </script>
</body>
</html>
